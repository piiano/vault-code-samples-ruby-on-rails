# pvault-sdk

PvaultSdk - the Ruby gem for the Piiano Vault REST API

---
sidebar_position: 1
sidebar_label: Overview
description: The Piiano Vault REST API enables you to access and manage collections, objects, tokens, users, policies, and other resources within Piiano Vault.
slug: /
---

# Introduction

The Piiano Vault REST API enables you to access and manage collections, objects, tokens, users, policies, and other resources within Piiano Vault in a simple, programmatic way using conventional HTTP requests and standard HTTP response codes.

The API follows RESTful conventions when possible, with most operations performed by `GET`, `POST`, `PUT`, `PATCH`, and `DELETE` requests. Request and response bodies are [JSON-encoded](https://www.json.org/json-en.html). However, for collection operations, an SQL-like [PVSchema](/guides/manage-collections-and-schemas/reference/pvschema) encoding is available.

This API reference provides details for each operation available in the API.

When you install a local copy of Vault, you can try each operation using **Send API request**.

An OpenAPI specification is available in [YAML](@site/static/assets/openapi.yaml) and [JSON](@site/static/assets/openapi.json) formats and can be used to generate client code for the API.


This SDK is automatically generated by the [OpenAPI Generator](https://openapi-generator.tech) project:

- API version: 1.0
- Package version: 1.0.0
- Build package: org.openapitools.codegen.languages.RubyClientCodegen
For more information, please visit [https://piiano.com/contact-us/](https://piiano.com/contact-us/)

## Installation

### Build a gem

To build the Ruby code into a gem:

```shell
gem build pvault-sdk.gemspec
```

Then either install the gem locally:

```shell
gem install ./pvault-sdk-1.0.0.gem
```

(for development, run `gem install --dev ./pvault-sdk-1.0.0.gem` to install the development dependencies)

or publish the gem to a gem hosting service, e.g. [RubyGems](https://rubygems.org/).

Finally add this to the Gemfile:

    gem 'pvault-sdk', '~> 1.0.0'

### Install from Git

If the Ruby gem is hosted at a git repository: https://github.com/GIT_USER_ID/GIT_REPO_ID, then add the following in the Gemfile:

    gem 'pvault-sdk', :git => 'https://github.com/GIT_USER_ID/GIT_REPO_ID.git'

### Include the Ruby code directly

Include the Ruby code directly using `-I` as follows:

```shell
ruby -Ilib script.rb
```

## Getting Started

Please follow the [installation](#installation) procedure and then run the following code:

```ruby
# Load the gem
require 'pvault-sdk'

# Setup authorization
PvaultSdk.configure do |config|
  # Configure Bearer authorization (JWT): bearerAuth
  config.access_token = 'YOUR_BEARER_TOKEN'
  # Configure a proc to get access tokens in lieu of the static access_token configuration
  config.access_token_getter = -> { 'YOUR TOKEN GETTER PROC' } 
end

api_instance = PvaultSdk::CollectionPropertiesApi.new
collection = 'buyers' # String | The name of the collection to add the property to.
property = 'buyer_phone' # String | The name of the property to add.
property2 = PvaultSdk::Property.new({name: 'buyer_name', pii_type_name: 'STRING'}) # Property | Details of the property.

begin
  #Add collection property
  result = api_instance.add_collection_property(collection, property, property2)
  p result
rescue PvaultSdk::ApiError => e
  puts "Exception when calling CollectionPropertiesApi->add_collection_property: #{e}"
end

```

## Documentation for API Endpoints

All URIs are relative to *http://localhost:8123*

Class | Method | HTTP request | Description
------------ | ------------- | ------------- | -------------
*PvaultSdk::CollectionPropertiesApi* | [**add_collection_property**](docs/CollectionPropertiesApi.md#add_collection_property) | **POST** /api/pvlt/1.0/ctl/collections/{collection}/properties/{property} | Add collection property
*PvaultSdk::CollectionPropertiesApi* | [**delete_collection_property**](docs/CollectionPropertiesApi.md#delete_collection_property) | **DELETE** /api/pvlt/1.0/ctl/collections/{collection}/properties/{property} | Delete collection property
*PvaultSdk::CollectionPropertiesApi* | [**get_collection_property**](docs/CollectionPropertiesApi.md#get_collection_property) | **GET** /api/pvlt/1.0/ctl/collections/{collection}/properties/{property} | Get collection property
*PvaultSdk::CollectionPropertiesApi* | [**list_collection_properties**](docs/CollectionPropertiesApi.md#list_collection_properties) | **GET** /api/pvlt/1.0/ctl/collections/{collection}/properties | List collection properties
*PvaultSdk::CollectionPropertiesApi* | [**update_collection_property**](docs/CollectionPropertiesApi.md#update_collection_property) | **PATCH** /api/pvlt/1.0/ctl/collections/{collection}/properties/{property} | Update collection property
*PvaultSdk::CollectionsApi* | [**add_collection**](docs/CollectionsApi.md#add_collection) | **POST** /api/pvlt/1.0/ctl/collections | Add collection
*PvaultSdk::CollectionsApi* | [**delete_collection**](docs/CollectionsApi.md#delete_collection) | **DELETE** /api/pvlt/1.0/ctl/collections/{collection} | Delete collection
*PvaultSdk::CollectionsApi* | [**get_collection**](docs/CollectionsApi.md#get_collection) | **GET** /api/pvlt/1.0/ctl/collections/{collection} | Get collection
*PvaultSdk::CollectionsApi* | [**list_collections**](docs/CollectionsApi.md#list_collections) | **GET** /api/pvlt/1.0/ctl/collections | List collections
*PvaultSdk::CollectionsApi* | [**update_collection**](docs/CollectionsApi.md#update_collection) | **PATCH** /api/pvlt/1.0/ctl/collections/{collection} | Update collection
*PvaultSdk::ConfigVarsApi* | [**clear_all_conf_vars**](docs/ConfigVarsApi.md#clear_all_conf_vars) | **DELETE** /api/pvlt/1.0/system/confvar | Clear configuration variables
*PvaultSdk::ConfigVarsApi* | [**get_conf_var**](docs/ConfigVarsApi.md#get_conf_var) | **GET** /api/pvlt/1.0/system/confvar/{name} | Get configuration variable
*PvaultSdk::ConfigVarsApi* | [**set_conf_var**](docs/ConfigVarsApi.md#set_conf_var) | **POST** /api/pvlt/1.0/system/confvar/{name} | Set configuration variable
*PvaultSdk::DataTypesAndTransformationsApi* | [**list_data_types**](docs/DataTypesAndTransformationsApi.md#list_data_types) | **GET** /api/pvlt/1.0/ctl/types | List property types
*PvaultSdk::DataTypesAndTransformationsApi* | [**list_transformations**](docs/DataTypesAndTransformationsApi.md#list_transformations) | **GET** /api/pvlt/1.0/ctl/transformations | List transformations
*PvaultSdk::IAMApi* | [**get_iam_conf**](docs/IAMApi.md#get_iam_conf) | **GET** /api/pvlt/1.0/ctl/iam/conf | Get IAM configuration
*PvaultSdk::IAMApi* | [**regenerate_user_api_key**](docs/IAMApi.md#regenerate_user_api_key) | **POST** /api/pvlt/1.0/ctl/iam/user/regen | Regenerate user API key
*PvaultSdk::IAMApi* | [**set_iam_conf**](docs/IAMApi.md#set_iam_conf) | **POST** /api/pvlt/1.0/ctl/iam/conf | Set IAM configuration
*PvaultSdk::ObjectsApi* | [**add_object**](docs/ObjectsApi.md#add_object) | **POST** /api/pvlt/1.0/data/collections/{collection}/objects | Add object
*PvaultSdk::ObjectsApi* | [**add_objects**](docs/ObjectsApi.md#add_objects) | **POST** /api/pvlt/1.0/data/collections/{collection}/bulk/objects | Add objects (bulk)
*PvaultSdk::ObjectsApi* | [**delete_object_by_id**](docs/ObjectsApi.md#delete_object_by_id) | **DELETE** /api/pvlt/1.0/data/collections/{collection}/objects/{id} | Delete object
*PvaultSdk::ObjectsApi* | [**delete_objects**](docs/ObjectsApi.md#delete_objects) | **DELETE** /api/pvlt/1.0/data/collections/{collection}/bulk/objects | Delete objects (bulk)
*PvaultSdk::ObjectsApi* | [**get_object_by_id**](docs/ObjectsApi.md#get_object_by_id) | **GET** /api/pvlt/1.0/data/collections/{collection}/objects/{id} | Get object
*PvaultSdk::ObjectsApi* | [**hash_objects**](docs/ObjectsApi.md#hash_objects) | **POST** /api/pvlt/1.0/data/collections/{collection}/hash/objects | Hash objects
*PvaultSdk::ObjectsApi* | [**list_objects**](docs/ObjectsApi.md#list_objects) | **GET** /api/pvlt/1.0/data/collections/{collection}/objects | List objects
*PvaultSdk::ObjectsApi* | [**search_objects**](docs/ObjectsApi.md#search_objects) | **POST** /api/pvlt/1.0/data/collections/{collection}/query/objects | Search objects
*PvaultSdk::ObjectsApi* | [**update_object_by_id**](docs/ObjectsApi.md#update_object_by_id) | **PATCH** /api/pvlt/1.0/data/collections/{collection}/objects/{id} | Update object
*PvaultSdk::ObjectsApi* | [**update_objects**](docs/ObjectsApi.md#update_objects) | **PATCH** /api/pvlt/1.0/data/collections/{collection}/bulk/objects | Update objects (bulk)
*PvaultSdk::SystemApi* | [**control_health**](docs/SystemApi.md#control_health) | **GET** /api/pvlt/1.0/ctl/info/health | Get control service health/status
*PvaultSdk::SystemApi* | [**data_health**](docs/SystemApi.md#data_health) | **GET** /api/pvlt/1.0/data/info/health | Get data service health/status
*PvaultSdk::SystemApi* | [**garbage_collection**](docs/SystemApi.md#garbage_collection) | **POST** /api/pvlt/1.0/system/admin/lifecycle/gc | Delete objects and tokens
*PvaultSdk::SystemApi* | [**get_cluster_info**](docs/SystemApi.md#get_cluster_info) | **GET** /api/pvlt/1.0/ctl/info/cluster | Get cluster information
*PvaultSdk::SystemApi* | [**get_configuration**](docs/SystemApi.md#get_configuration) | **GET** /api/pvlt/1.0/system/info/configuration | Get system configuration
*PvaultSdk::SystemApi* | [**get_kms**](docs/SystemApi.md#get_kms) | **GET** /api/pvlt/1.0/system/info/kms | Get KMS status
*PvaultSdk::SystemApi* | [**get_license**](docs/SystemApi.md#get_license) | **GET** /api/pvlt/1.0/system/info/license | Get license
*PvaultSdk::SystemApi* | [**get_vault_version**](docs/SystemApi.md#get_vault_version) | **GET** /api/pvlt/1.0/system/info/version | Get Vault version
*PvaultSdk::SystemApi* | [**rotate_keys**](docs/SystemApi.md#rotate_keys) | **POST** /api/pvlt/1.0/system/admin/keys/rotate | Rotate data encryption keys
*PvaultSdk::SystemApi* | [**trigger_error**](docs/SystemApi.md#trigger_error) | **POST** /api/pvlt/1.0/system/debug/error/trigger | Trigger an artificial error
*PvaultSdk::TokensApi* | [**delete_tokens**](docs/TokensApi.md#delete_tokens) | **DELETE** /api/pvlt/1.0/data/collections/{collection}/tokens | Delete tokens
*PvaultSdk::TokensApi* | [**detokenize**](docs/TokensApi.md#detokenize) | **GET** /api/pvlt/1.0/data/collections/{collection}/tokens | Detokenize tokens
*PvaultSdk::TokensApi* | [**rotate_tokens**](docs/TokensApi.md#rotate_tokens) | **POST** /api/pvlt/1.0/data/collections/{collection}/rotate/tokens | Rotate tokens
*PvaultSdk::TokensApi* | [**search_tokens**](docs/TokensApi.md#search_tokens) | **POST** /api/pvlt/1.0/data/collections/{collection}/query/tokens | Search tokens
*PvaultSdk::TokensApi* | [**tokenize**](docs/TokensApi.md#tokenize) | **POST** /api/pvlt/1.0/data/collections/{collection}/tokens | Tokenize
*PvaultSdk::TokensApi* | [**update_tokens**](docs/TokensApi.md#update_tokens) | **PATCH** /api/pvlt/1.0/data/collections/{collection}/tokens | Update tokens


## Documentation for Models

 - [PvaultSdk::APIKey](docs/APIKey.md)
 - [PvaultSdk::AllGenerations](docs/AllGenerations.md)
 - [PvaultSdk::AuthConfig](docs/AuthConfig.md)
 - [PvaultSdk::AuthPolicy](docs/AuthPolicy.md)
 - [PvaultSdk::AuthRole](docs/AuthRole.md)
 - [PvaultSdk::AuthUser](docs/AuthUser.md)
 - [PvaultSdk::BulkObjectResponse](docs/BulkObjectResponse.md)
 - [PvaultSdk::BulkObjectResult](docs/BulkObjectResult.md)
 - [PvaultSdk::Collection](docs/Collection.md)
 - [PvaultSdk::ConfVar](docs/ConfVar.md)
 - [PvaultSdk::ConfVarValue](docs/ConfVarValue.md)
 - [PvaultSdk::ConfigConfig](docs/ConfigConfig.md)
 - [PvaultSdk::ConfigDB](docs/ConfigDB.md)
 - [PvaultSdk::ConfigExpiration](docs/ConfigExpiration.md)
 - [PvaultSdk::ConfigFeatures](docs/ConfigFeatures.md)
 - [PvaultSdk::ConfigGC](docs/ConfigGC.md)
 - [PvaultSdk::ConfigKMS](docs/ConfigKMS.md)
 - [PvaultSdk::ConfigLog](docs/ConfigLog.md)
 - [PvaultSdk::ConfigMigration](docs/ConfigMigration.md)
 - [PvaultSdk::ConfigSentry](docs/ConfigSentry.md)
 - [PvaultSdk::ConfigService](docs/ConfigService.md)
 - [PvaultSdk::ConfigTLS](docs/ConfigTLS.md)
 - [PvaultSdk::DetokenizedToken](docs/DetokenizedToken.md)
 - [PvaultSdk::GcDeletionCount](docs/GcDeletionCount.md)
 - [PvaultSdk::HashObjectRequest](docs/HashObjectRequest.md)
 - [PvaultSdk::Health](docs/Health.md)
 - [PvaultSdk::InputObject](docs/InputObject.md)
 - [PvaultSdk::KMSStatus](docs/KMSStatus.md)
 - [PvaultSdk::License](docs/License.md)
 - [PvaultSdk::Object](docs/Object.md)
 - [PvaultSdk::ObjectFieldsPage](docs/ObjectFieldsPage.md)
 - [PvaultSdk::ObjectID](docs/ObjectID.md)
 - [PvaultSdk::PIIType](docs/PIIType.md)
 - [PvaultSdk::Paging](docs/Paging.md)
 - [PvaultSdk::ProductVersion](docs/ProductVersion.md)
 - [PvaultSdk::Property](docs/Property.md)
 - [PvaultSdk::Query](docs/Query.md)
 - [PvaultSdk::QueryToken](docs/QueryToken.md)
 - [PvaultSdk::RestHTTPError](docs/RestHTTPError.md)
 - [PvaultSdk::TokenAggregatedMetadata](docs/TokenAggregatedMetadata.md)
 - [PvaultSdk::TokenMetadata](docs/TokenMetadata.md)
 - [PvaultSdk::TokenRefMetadata](docs/TokenRefMetadata.md)
 - [PvaultSdk::TokenType](docs/TokenType.md)
 - [PvaultSdk::TokenValue](docs/TokenValue.md)
 - [PvaultSdk::TokenizeRequest](docs/TokenizeRequest.md)
 - [PvaultSdk::Transformation](docs/Transformation.md)
 - [PvaultSdk::UpdateTokenRequest](docs/UpdateTokenRequest.md)
 - [PvaultSdk::UserName](docs/UserName.md)
 - [PvaultSdk::VaultGeneration](docs/VaultGeneration.md)
 - [PvaultSdk::Worker](docs/Worker.md)


## Documentation for Authorization


### bearerAuth

- **Type**: Bearer authentication (JWT)

